<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Manager Dashboard</title>

<link
	href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
	rel="stylesheet">

<link rel="stylesheet" href="/css/navbar.css">

<link rel="stylesheet" href="/css/manager-dashboard.css">
</head>
<body>

	<div th:replace="fragments/navbar :: navbar"></div>
	<a href="/manager/leave-calendar" class="btn-calendar"> View Leave
		Calendar </a>


	<main class="container" th:fragment="managerDashboard">

		<!-- ================= ALL EMPLOYEES ================= -->
		<section class="card">
			<h2>All Employees</h2>

			<table>
				<thead>
					<tr>
						<th>ID</th>
						<th>Full Name</th>
						<th>Phone</th>
						<th>DOB</th>
						<th>Email</th>
						<th>PAN</th>
						<th>Aadhaar</th>
						<th>Designation</th>
						<th>Gender</th>
						<th>Action</th>
					</tr>
				</thead>

				<tbody>
					<tr th:each="emp : ${employees}"
						th:if="${not #lists.isEmpty(employees)}">
						<td th:text="${emp.id}">1</td>
						<td th:text="${emp.fullname}">John Doe</td>
						<td th:text="${emp.phone}">9876543210</td>
						<td th:text="${emp.dob}">1998-06-14</td>
						<td th:text="${emp.email}">john@email.com</td>
						<td th:text="${emp.panNumber}">ABCDE1234F</td>
						<td th:text="${emp.aadhaarNumber}">123412341234</td>
						<td th:text="${emp.designation}">Developer</td>
						<td th:text="${emp.gender}">Male</td>

						<td style="display: flex; gap: 10px;"><a
							th:href="'/edit-employee/' + ${emp.id}" class="btn small primary">Edit</a>
							<a th:href="'/delete-employee/' + ${emp.id}"
							class="btn small danger">Delete</a></td>
					</tr>

					<tr th:if="${#lists.isEmpty(employees)}">
						<td colspan="10"
							style="text-align: center; padding: 30px; color: #94a3b8;">
							No employees found in the system.</td>
					</tr>
				</tbody>
			</table>
		</section>

		<!-- ================= LEAVE APPLICATIONS ================= -->
		<section class="card">
			<h2>Employee Leave Applications</h2>

			<table>
				<thead>
					<tr>
						<th>ID</th>
						<th>Name</th>
						<th>Designation</th>
						<th>Type</th>
						<th>From</th>
						<th>To</th>
						<th>Reason</th>
						<th>Status</th>
						<th>Action</th>
					</tr>
				</thead>

				<tbody>
					<tr th:each="app : ${applications}">
						<td th:text="${app.employee.id}">101</td>
						<td th:text="${app.employee.fullname}">John</td>
						<td th:text="${app.employee.designation}">Developer</td>
						<td th:text="${app.leaveType}">Sick</td>
						<td th:text="${app.fromDate}">2023-01-01</td>
						<td th:text="${app.toDate}">2023-01-05</td>
						<td th:text="${app.reason}">Fever</td>

						<td><span th:text="${app.status}"
							th:classappend="${app.status=='PENDING'} ? 'pending' :
                                          (${app.status=='APPROVED'} ? 'approved' : 'rejected')">
						</span></td>

						<td>
							<div th:if="${app.status=='PENDING'}"
								style="display: flex; gap: 5px;">
								<a th:href="@{/application-approve/{id}(id=${app.id})}"
									class="btn small success">Approve</a> <a
									th:href="@{/application-reject/{id}(id=${app.id})}"
									class="btn small danger">Reject</a>
							</div> <span th:unless="${app.status=='PENDING'}"
							style="color: #64748b; font-size: 0.8rem;"> No actions </span>
						</td>
					</tr>

					<tr th:if="${applications == null || #lists.isEmpty(applications)}">
						<td colspan="9"
							style="text-align: center; padding: 30px; color: #94a3b8;">
							No leave applications found.</td>
					</tr>
				</tbody>
			</table>
		</section>

	</main>

	<footer>
		<p>Â© 2026 Employee Leave Management System</p>
	</footer>

</body>
</html>